module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=require("react")},function(e,t,r){"use strict";r.r(t),r.d(t,"GoogleButton",(function(){return h}));var n,o=r(0),c=r.n(o);!function(e){e.GOOGLE_OAUTH_ENDPOINT="https://accounts.google.com/o/oauth2/v2/auth"}(n||(n={}));var i=function(){function e(e,t){var r=this;this.redirect=function(e){if(!r.googleRedirectURL)throw new ReferenceError("Error creating redirect url to Google's authorization server");window.location.replace(r.googleRedirectURL)},this.params=e,this.scopesStr=t}return Object.defineProperty(e.prototype,"googleRedirectURL",{get:function(){return this._googleRedirectURL},set:function(e){this._googleRedirectURL=e},enumerable:!1,configurable:!0}),e.prototype.createAuthorizationRequestURL=function(){var e,t=this.params,r=t.accessType,o=t.includeGrantedScopes,c=void 0===o||o,i=t.responseType,a=void 0===i?"code":i,u=t.state,s=void 0===u?null:u,l=t.redirectUri,p=t.clientId;e=n.GOOGLE_OAUTH_ENDPOINT+"?scope="+this.scopesStr+"&",e=(e=(e=r?e+"access_type="+r+"&":e)+"include_granted_scopes="+c+"&")+"response_type="+a+"&",e=(e=(e=s?e+"state="+s+"&":e)+"redirect_uri="+l+"&")+"client_id="+p,this.googleRedirectURL=e},e.createScopes=function(e){var t="";return e.map((function(r,n){e.length-1===n?t+=""+r:t+=r+"%20"})),t},e}(),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,c){function i(e){try{u(n.next(e))}catch(e){c(e)}}function a(e){try{u(n.throw(e))}catch(e){c(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}};function s(e){var t=e.email,r=void 0===t?"":t,n=e.code;(function(e,t){return a(this,void 0,void 0,(function(){return u(this,(function(r){switch(r.label){case 0:return[4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,r.sent().json()]}}))}))})(e.apiUrl,{code:n,email:r,scope:e.scope}).then((function(t){e.setResponseState({accessToken:t.access_token})})).catch((function(t){e.setResponseState({error:t})}))}var l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p={},d={backgroundSize:"20px 20px",backgroundRepeat:"no-repeat",backgroundPosition:"12px 10px",textIndent:"19px",border:"1px solid #bdc3c7",padding:"9px 23px",borderRadius:"9px",backgroundColor:"#bdc3c7",fontSize:"18px"},f=c.a.createContext({queryParamsCode:!1}),g=(f.Provider,f.Consumer,function(e){var t=e.placeholder,r=void 0===t?"":t,n=e.defaultStyle,o=void 0===n||n,a=e.options,u=i.createScopes(a.scopes),s=new i(a,u);s.createAuthorizationRequestURL();var p=o?function(e,t){return e?l(l({},t),{backgroundImage:"url("+e+")"}):t}(r,d):void 0;return c.a.createElement("button",{style:p,onClick:s.redirect},"Sign in with google")}),h=function(e){var t,r=e.callback,n=Object(o.useState)(p),i=n[0],a=n[1],u=new URLSearchParams(window.location.search),d=u.get("code"),f=u.get("error");return i.accessToken?(t=i.accessToken,window.localStorage.setItem("accessToken",t),console.debug("`accessToken` set in local storage."),null):i.error?(console.error("Error: Api call failed with "+f+" error."),c.a.createElement(g,l({},e,{error:i.error}))):d?(s({email:u.get("email")||"",scope:u.get("scope")||"",code:d,client_id:e.options.clientId,apiUrl:e.apiUrl,responseState:i,setResponseState:a}),console.debug("Waiting for remote api response"),r?r():c.a.createElement(c.a.Fragment,null,"Loading...")):f?(console.error("Error: Google login attempt failed with "+f+" error."),c.a.createElement(g,l({},e,{error:f}))):c.a.createElement(g,l({},e))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1nb29nbGUtb2F1dGgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVhY3QtZ29vZ2xlLW9hdXRoL2V4dGVybmFsIFwicmVhY3RcIiIsIndlYnBhY2s6Ly9yZWFjdC1nb29nbGUtb2F1dGgvLi9zcmMvYXV0aG9yaXphdGlvbi50cyIsIndlYnBhY2s6Ly9yZWFjdC1nb29nbGUtb2F1dGgvLi9zcmMvX2FwaVV0aWxzLnRzIiwid2VicGFjazovL3JlYWN0LWdvb2dsZS1vYXV0aC8uL3NyYy9jb21wb25lbnRzLnRzeCJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInJlcXVpcmUiLCJHb29nbGVBUElDb25uZWN0aW9uU3RyaW5ncyIsInBhcmFtcyIsInNjb3Blc1N0ciIsInJlZGlyZWN0IiwiZSIsImdvb2dsZVJlZGlyZWN0VVJMIiwiUmVmZXJlbmNlRXJyb3IiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJ0aGlzIiwiX2dvb2dsZVJlZGlyZWN0VVJMIiwiY3JlYXRlQXV0aG9yaXphdGlvblJlcXVlc3RVUkwiLCJ1cmwiLCJhY2Nlc3NUeXBlIiwiaW5jbHVkZUdyYW50ZWRTY29wZXMiLCJyZXNwb25zZVR5cGUiLCJzdGF0ZSIsInJlZGlyZWN0VXJpIiwiY2xpZW50SWQiLCJHT09HTEVfT0FVVEhfRU5EUE9JTlQiLCJjcmVhdGVTY29wZXMiLCJzY29wZXMiLCJzdHIiLCJtYXAiLCJzY29wZSIsImxlbmd0aCIsInNlcnZlclJlc3BvbnNlIiwicHJvcHMiLCJlbWFpbCIsImNvZGUiLCJhcGlVcmwiLCJwYXlsb2FkIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJqc29uIiwicG9zdFRvRXhjaGFuZ2VBcGlVcmwiLCJ0aGVuIiwiZGF0YSIsInNldFJlc3BvbnNlU3RhdGUiLCJhY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJTRVJWRVJfUkVTUE9OU0VfU1RBVEUiLCJidXR0b25TdHlsaW5nIiwiYmFja2dyb3VuZFNpemUiLCJiYWNrZ3JvdW5kUmVwZWF0IiwiYmFja2dyb3VuZFBvc2l0aW9uIiwidGV4dEluZGVudCIsImJvcmRlciIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmb250U2l6ZSIsIkdvb2dsZUF1dGhDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsInF1ZXJ5UGFyYW1zQ29kZSIsIklubmVyQnV0dG9uIiwiUHJvdmlkZXIiLCJDb25zdW1lciIsInBsYWNlaG9sZGVyIiwiZGVmYXVsdFN0eWxlIiwib3B0aW9ucyIsIkF1dGhvcml6YXRpb24iLCJhdXRoIiwic3R5bGVzIiwiYmFja2dyb3VuZEltYWdlIiwiX2dldEJhY2tncm91bmRJbWciLCJ1bmRlZmluZWQiLCJzdHlsZSIsIm9uQ2xpY2siLCJHb29nbGVCdXR0b24iLCJ0b2tlbiIsImNhbGxiYWNrIiwicmVzcG9uc2VTdGF0ZSIsImN1cnJlbnRVcmwiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJxdWVyeVBhcmFtc0Vycm9yIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImNvbnNvbGUiLCJkZWJ1ZyIsImNsaWVudF9pZCJdLCJtYXBwaW5ncyI6IjJCQUNFLElBQUlBLEVBQW1C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RCxjQUFhLEVBQ2JyQyxpQkFBZ0IsSUFHcEI0QyxRQUFRQyxNQUFNLG1DQUNQVCxFQUFXQSxJQUFhLG1EQUN6QkssR0FDTkcsUUFBUXZDLE1BQU0sMkNBQTJDb0MsRUFBZ0IsV0FDbEUsa0JBQUNyQixFQUFXLEtBQUtuQyxFQUFLLENBQUVvQixNQUFPb0MsTUFHbkMsa0JBQUNyQixFQUFXLEtBQUtuQyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlYWN0XCIpOyIsIi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBlbnVtIEdvb2dsZUFQSUNvbm5lY3Rpb25TdHJpbmdzIHtcbiAgICBHT09HTEVfT0FVVEhfRU5EUE9JTlQgPSBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi92Mi9hdXRoXCIsXG59XG4vKiogQGludGVybmFsICovXG5pbnRlcmZhY2UgSUF1dGhvcml6YXRpb25CYXNlIHtcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIC8qKiBXaGVyZSB5b3UgUmVhY3QgYXBwIHNob3VsZCByZWRpcmVjdCB0byBpZiB1c2VyIGhhcyBzdWNjZXNzZnVsbHkgbG9nZ2VkIGluICoqL1xuICAgIHJlZGlyZWN0VXJpOiBzdHJpbmc7XG4gICAgcmVzcG9uc2VUeXBlPzogc3RyaW5nO1xuICAgIC8qKiBWYWxpZCBwYXJhbWV0ZXIgdmFsdWVzIGFyZSBvbmxpbmUsIHdoaWNoIGlzIHRoZSBkZWZhdWx0IHZhbHVlLFxuICAgICAqIGFuZCBvZmZsaW5lICBTZXQgdGhlIHZhbHVlIHRvIG9mZmxpbmUgaWYgeW91ciBhcHBsaWNhdGlvbiBuZWVkc1xuICAgICAqIHRvIHJlZnJlc2ggYWNjZXNzIHRva2VucyB3aGVuIHRoZSB1c2VyIGlzIG5vdCBwcmVzZW50IGF0IHRoZSBicm93c2VyXG4gICAgICovXG4gICAgYWNjZXNzVHlwZT86IHN0cmluZztcbiAgICBzdGF0ZT86IHN0cmluZztcbiAgICBpbmNsdWRlR3JhbnRlZFNjb3Blcz86IGJvb2xlYW47XG4gICAgbG9naW5IaW50Pzogc3RyaW5nO1xuICAgIHByb21wdD86IHN0cmluZztcbn1cbi8qKiBAcHVibGljICovXG5leHBvcnQgaW50ZXJmYWNlIElBdXRob3JpemF0aW9uT3B0aW9ucyBleHRlbmRzIElBdXRob3JpemF0aW9uQmFzZSB7XG4gICAgc2NvcGVzOiBBcnJheTxzdHJpbmc+O1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJQXV0aG9yaXphdGlvbiB7XG4gICAgcGFyYW1zOiBJQXV0aG9yaXphdGlvbk9wdGlvbnM7XG4gICAgLyoqIFNldCB0byAgYFtcIm9wZW5pZFwiLCBcInByb2ZpbGVcIl1gIGJ5IGRlZmF1bHQgKiovXG4gICAgc2NvcGVzU3RyOiBzdHJpbmc7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgQXV0aG9yaXphdGlvbiBpbXBsZW1lbnRzIElBdXRob3JpemF0aW9uIHtcblxuICAgIHByaXZhdGUgX2dvb2dsZVJlZGlyZWN0VVJMPzogc3RyaW5nO1xuXG4gICAgcHVibGljIHBhcmFtczogSUF1dGhvcml6YXRpb25PcHRpb25zO1xuXG4gICAgcHVibGljIHNjb3Blc1N0cjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocGFyYW1zOiBJQXV0aG9yaXphdGlvbk9wdGlvbnMsIHNjb3Blc1N0cjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLnNjb3Blc1N0ciA9IHNjb3Blc1N0cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcHJvcGVydHkgZ29vZ2xlUmVkaXJlY3RVUkwgQWNjZXNzIHRoZSB1cmwgZm9yIHRoZSBpbml0aWFsXG4gICAgICogYnJvd3NlciBjYWxsIHRvIEdvb2dsZSdzIE9BdXRoIDIuMCBzZXJ2ZXIuIFVzZWZ1bCBmb3IgZGVidWdnaW5nLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXQgZ29vZ2xlUmVkaXJlY3RVUkwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nb29nbGVSZWRpcmVjdFVSTDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IGdvb2dsZVJlZGlyZWN0VVJMKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fZ29vZ2xlUmVkaXJlY3RVUkwgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKiogQGludGVybmFsICovXG4gICAgcHVibGljIGNyZWF0ZUF1dGhvcml6YXRpb25SZXF1ZXN0VVJMKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhY2Nlc3NUeXBlLFxuICAgICAgICAgICAgaW5jbHVkZUdyYW50ZWRTY29wZXMgPSB0cnVlLFxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gXCJjb2RlXCIsXG4gICAgICAgICAgICBzdGF0ZSA9IG51bGwsXG4gICAgICAgICAgICByZWRpcmVjdFVyaSxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICB9ID0gdGhpcy5wYXJhbXM7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IEdvb2dsZUFQSUNvbm5lY3Rpb25TdHJpbmdzLkdPT0dMRV9PQVVUSF9FTkRQT0lOVDtcbiAgICAgICAgbGV0IHVybDogc3RyaW5nO1xuICAgICAgICB1cmwgPSBgJHtkb21haW59P3Njb3BlPSR7dGhpcy5zY29wZXNTdHJ9JmA7XG4gICAgICAgIHVybCA9IGFjY2Vzc1R5cGUgPyBgJHt1cmx9YWNjZXNzX3R5cGU9JHthY2Nlc3NUeXBlfSZgIDogdXJsO1xuICAgICAgICB1cmwgPSBgJHt1cmx9aW5jbHVkZV9ncmFudGVkX3Njb3Blcz0ke2luY2x1ZGVHcmFudGVkU2NvcGVzfSZgO1xuICAgICAgICB1cmwgPSBgJHt1cmx9cmVzcG9uc2VfdHlwZT0ke3Jlc3BvbnNlVHlwZX0mYDtcbiAgICAgICAgdXJsID0gc3RhdGUgPyBgJHt1cmx9c3RhdGU9JHtzdGF0ZX0mYCA6IHVybDtcbiAgICAgICAgdXJsID0gYCR7dXJsfXJlZGlyZWN0X3VyaT0ke3JlZGlyZWN0VXJpfSZgO1xuICAgICAgICB1cmwgPSBgJHt1cmx9Y2xpZW50X2lkPSR7Y2xpZW50SWR9YDtcbiAgICAgICAgdGhpcy5nb29nbGVSZWRpcmVjdFVSTCA9IHVybDtcbiAgICB9XG5cbiAgICAvKiogQGludGVybmFsICovXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVTY29wZXMoc2NvcGVzOiBBcnJheTxzdHJpbmc+KTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgIHNjb3Blcy5tYXAoKHNjb3BlLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCAtIDEgPT09IGkpIHtcbiAgICAgICAgICAgICAgICBzdHIgKz0gYCR7c2NvcGV9YDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyICs9IGAke3Njb3BlfSUyMGA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBwdWJsaWMgcmVkaXJlY3QgPSAoZTogYW55KTogdm9pZCA9PiB7XG4gICAgICAgIGlmKHRoaXMuZ29vZ2xlUmVkaXJlY3RVUkwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRoaXMuZ29vZ2xlUmVkaXJlY3RVUkwpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJFcnJvciBjcmVhdGluZyByZWRpcmVjdCB1cmwgdG8gR29vZ2xlJ3MgYXV0aG9yaXphdGlvbiBzZXJ2ZXJcIik7XG4gICAgICAgIH1cbiAgICB9XG59IiwiLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJUGF5bG9hZCB7XG4gICAgcmVhZG9ubHkgZW1haWw6IHN0cmluZztcbiAgICByZWFkb25seSBjb2RlOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgc2NvcGU6IHN0cmluZztcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUFwaVJlc3BvbnNlRGF0YSB7IHJlYWRvbmx5IGFjY2Vzc190b2tlbjogc3RyaW5nOyB9XG4vKiogQGludGVybmFsICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcG9zdFRvRXhjaGFuZ2VBcGlVcmwoYXBpVXJsOiBzdHJpbmcsIHBheWxvYWQ6IElQYXlsb2FkKTogUHJvbWlzZTxJQXBpUmVzcG9uc2VEYXRhPiB7XG4gICAgY29uc3QgcmVzOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgIH0pO1xuICAgIHJldHVybiByZXMuanNvbigpO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlcnZlclJlc3BvbnNlKHByb3BzOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCB7IGVtYWlsID0gXCJcIiwgY29kZSwgYXBpVXJsLCBzY29wZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgcGF5bG9hZDogSVBheWxvYWQgPSB7IGNvZGUsIGVtYWlsLCBzY29wZSB9O1xuICAgIHBvc3RUb0V4Y2hhbmdlQXBpVXJsKGFwaVVybCwgcGF5bG9hZClcbiAgICAgICAgLnRoZW4oKGRhdGE6IElBcGlSZXNwb25zZURhdGEpID0+IHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSByZXNwb25zZVN0YXRlIGFjY2Vzc1Rva2VuXG4gICAgICAgICAgICBwcm9wcy5zZXRSZXNwb25zZVN0YXRlKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICBwcm9wcy5zZXRSZXNwb25zZVN0YXRlKHtcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVBY2Nlc3NUb2tlbih0b2tlbjogc3RyaW5nKTogdm9pZCB7XG4gICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImFjY2Vzc1Rva2VuXCIsIHRva2VuKTtcbn1cbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBSZWFjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgICBBdXRob3JpemF0aW9uLFxuICAgIElBdXRob3JpemF0aW9uT3B0aW9ucyxcbn0gZnJvbSBcIi4vYXV0aG9yaXphdGlvblwiO1xuaW1wb3J0IHtzZXJ2ZXJSZXNwb25zZSwgc3RvcmVBY2Nlc3NUb2tlbn0gZnJvbSBcIi4vX2FwaVV0aWxzXCI7XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgaW50ZXJmYWNlIElHb29nbGVCdXR0b24ge1xuICAgIC8qKiBQbGFjZWhvbGRlciBpbWFnZSBkaXNwbGF5ZWQgbmV4dCB0byBidXR0b24gdGV4dCAqL1xuICAgIHJlYWRvbmx5IHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgIC8qKiBSZW1vdmUgZGVmYXVsdCBzdHlsZXMuIFRoZSBwbGFjZWhvbGRlciBwcm9wIGhhcyBubyBlZmZlY3QgaWYgcGxhY2Vob2xkZXIgaXMgc2V0IHRvIGZhbHNlICovXG4gICAgcmVhZG9ubHkgZGVmYXVsdFN0eWxlPzogYm9vbGVhbjtcbiAgICAvKiogU2VlIElBdXRob3JpemF0aW9uUmVxdWVzdFBhcmFtcyAqL1xuICAgIHJlYWRvbmx5IG9wdGlvbnM6IElBdXRob3JpemF0aW9uT3B0aW9ucztcbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHlcbiAgICAgKiBAb3B0aW9uYWxcbiAgICAgKiBBIFJlYWN0IGNvbXBvbmVudCBvciBhbnkgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUmVhY3QgY29tcG9uZW50LlxuICAgICAqIFRoaXMgd291bGQgbm9ybWFsbHkgYmUgdXNlZCB0byBkaXNwbGF5IGEgcHJlbG9hZGVyIHRvIHRoZSB1c2VyIHdoaWxzdFxuICAgICAqIHRoZSBPQXV0aDIuMCBsb2dpbiBzdHJhdGVneSBpcyBpbiBmbGlnaHQuIEJ5IGRlZmF1bHQgYSBgTG9hZGluZy4uLmBcbiAgICAgKiBtZXNzYWdlIHdpbGwgYmUgZGlzcGxheWVkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogPEdvb2dsZUJ1dHRvblxuICAgICAqICAgIGNhbGxiYWNrPXsoKSA9PiA8PlwiTG9hZGluZy4uLlwiPC8+fVxuICAgICAqICAgIC8vIG90aGVyIHByb3BzLi4uXG4gICAgICogLz5cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZWFkb25seSBjYWxsYmFjaz86ICgpID0+IFJlYWN0LlJlYWN0SFRNTEVsZW1lbnQ8YW55PjtcbiAgICAvKiogVGhlIHVybCBvZiB0aGUgYXBpIHRvIHBlcmZvcm0gdGhlIGV4Y2hhbmdlICovXG4gICAgcmVhZG9ubHkgYXBpVXJsOiBzdHJpbmc7XG59XG4vKiogQGludGVybmFsICovXG50eXBlIFR5cGVCdXR0b25TdHlsZXMgPSB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuaW50ZXJmYWNlIElHb29nbGVBdXRoQ29udGV4dCB7IHJlYWRvbmx5IHF1ZXJ5UGFyYW1zQ29kZTogYm9vbGVhbjsgfVxuLyoqIEBpbnRlcm5hbCAqL1xuaW50ZXJmYWNlIElTZXJ2ZXJSZXNwb25zZVN0YXRlIHsgcmVhZG9ubHkgYWNjZXNzVG9rZW4/OiBzdHJpbmc7IGVycm9yPzogc3RyaW5nIH1cbi8qKiBAaW50ZXJuYWwgKi9cbmludGVyZmFjZSBJU2VydmVyUmVzcG9uc2Uge1xuICAgIHJlYWRvbmx5IGVtYWlsPzogc3RyaW5nO1xuICAgIGVycm9yPzogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGNvZGU6IHN0cmluZztcbiAgICByZWFkb25seSBzY29wZTogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGNsaWVudF9pZDogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGFwaVVybDogc3RyaW5nO1xuICAgIHJlc3BvbnNlU3RhdGU6IElTZXJ2ZXJSZXNwb25zZVN0YXRlO1xuICAgIHNldFJlc3BvbnNlU3RhdGU6IGFueTsgLy8gVE9ET1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3QgU0VSVkVSX1JFU1BPTlNFX1NUQVRFID0geyB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3QgREVGQVVMVF9HT09HTEVfQVVUSF9TVEFURSA9IHsgcXVlcnlQYXJhbXNDb2RlOiBmYWxzZSB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3QgYnV0dG9uU3R5bGluZzogVHlwZUJ1dHRvblN0eWxlcyA9IHtcbiAgICBiYWNrZ3JvdW5kU2l6ZTogXCIyMHB4IDIwcHhcIixcbiAgICBiYWNrZ3JvdW5kUmVwZWF0OiBcIm5vLXJlcGVhdFwiLFxuICAgIGJhY2tncm91bmRQb3NpdGlvbjogXCIxMnB4IDEwcHhcIixcbiAgICB0ZXh0SW5kZW50OiBcIjE5cHhcIixcbiAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNiZGMzYzdcIixcbiAgICBwYWRkaW5nOiBcIjlweCAyM3B4XCIsXG4gICAgYm9yZGVyUmFkaXVzOiBcIjlweFwiLFxuICAgIGJhY2tncm91bmRDb2xvcjogXCIjYmRjM2M3XCIsXG4gICAgZm9udFNpemU6IFwiMThweFwiLFxufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IEdvb2dsZUF1dGhDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxJR29vZ2xlQXV0aENvbnRleHQ+KERFRkFVTFRfR09PR0xFX0FVVEhfU1RBVEUpO1xuZXhwb3J0IGNvbnN0IEdvb2dsZUF1dGggPSBHb29nbGVBdXRoQ29udGV4dC5Qcm92aWRlcjtcbmV4cG9ydCBjb25zdCBHb29nbGVBdXRoQ29uc3VtZXIgPSBHb29nbGVBdXRoQ29udGV4dC5Db25zdW1lcjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IF9nZXRCYWNrZ3JvdW5kSW1nID0gKHBsYWNlaG9sZGVyOiBzdHJpbmcsIHN0eWxlczogVHlwZUJ1dHRvblN0eWxlcyk6IFR5cGVCdXR0b25TdHlsZXMgPT4ge1xuICAgIGlmKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgIHJldHVybiB7IC4uLnN0eWxlcywgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7cGxhY2Vob2xkZXJ9KWAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlcztcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjb25zdCBJbm5lckJ1dHRvbiA9IChwcm9wczogSUdvb2dsZUJ1dHRvbiAmIHsgZXJyb3I/OiBzdHJpbmd9ICYgUmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgeyBwbGFjZWhvbGRlciA9IFwiXCIsIGRlZmF1bHRTdHlsZSA9IHRydWUsIG9wdGlvbnMgfSA9IHByb3BzO1xuXG4gICAgY29uc3Qgc2NvcGVzID0gQXV0aG9yaXphdGlvbi5jcmVhdGVTY29wZXMob3B0aW9ucy5zY29wZXMpO1xuICAgIGNvbnN0IGF1dGggPSBuZXcgQXV0aG9yaXphdGlvbihvcHRpb25zLCBzY29wZXMpO1xuICAgIGF1dGguY3JlYXRlQXV0aG9yaXphdGlvblJlcXVlc3RVUkwoKTtcblxuICAgIGNvbnN0IHN0eWxlcyA9IGRlZmF1bHRTdHlsZSA/IF9nZXRCYWNrZ3JvdW5kSW1nKHBsYWNlaG9sZGVyLCBidXR0b25TdHlsaW5nKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gPGJ1dHRvbiBzdHlsZT17c3R5bGVzfSBvbkNsaWNrPXthdXRoLnJlZGlyZWN0fSA+U2lnbiBpbiB3aXRoIGdvb2dsZTwvYnV0dG9uPlxufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogKipRdWljayBTdGFydDoqKlxuICpcbiAqIEZpcnN0IGNyZWF0ZSBhbiBvcHRpb25zIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYW4ge0BsaW5rICBJQXV0aG9yaXphdGlvbk9wdGlvbnN9IHR5cGUuXG4gKiBDaGVjayB0aGUge0BsaW5rICBJQXV0aG9yaXphdGlvbk9wdGlvbnN9IGFuZCB7QGxpbmsgIElBdXRob3JpemF0aW9uQmFzZX0gdHlwZXMgZm9yXG4gKiBhbGwgcmVxdWlyZWQgcHJvcGVydGllcy4gVGhlbiwgcGFzcyB0aGUgb3B0aW9ucyB0byB0aGUge0BsaW5rIEdvb2dsZUJ1dHRvbn0gY29tcG9uZW50LlxuICpcbiAqIGBgYElBdXRob3JpemF0aW9uT3B0aW9uc1xuICogIGNvbnN0IG9wdGlvbnM6ICA9IHtcbiAqICAgICAgY2xpZW50SWQ6IChwcm9jZXNzLmVudi5DTElFTlRfSUQgYXMgc3RyaW5nKSxcbiAqICAgICAgIHJlZGlyZWN0VXJpOiBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiLFxuICogICAgICAgc2NvcGVzOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIl0sXG4gKiAgICAgICBpbmNsdWRlR3JhbnRlZFNjb3BlczogdHJ1ZSxcbiAqICAgICAgIGFjY2Vzc1R5cGU6IFwib2ZmbGluZVwiLFxuICogICB9O1xuICpcbiAqICAgPEdvb2dsZUJ1dHRvblxuICogICAgICAgICBwbGFjZWhvbGRlcj1cImRlbW8vc2VhcmNoLnBuZ1wiXG4gKiAgICAgICAgIG9wdGlvbnM9e29wdGlvbnN9XG4gKiAgICAgICAgIGFwaVVybD1cImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9nb29nbGVfbG9naW5cIlxuICogICAvPlxuICogYGBgXG4gKiBAcGFyYW0gcHJvcHMgc2VlIElHb29nbGVCdXR0b25cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY29uc3QgR29vZ2xlQnV0dG9uID0gKHByb3BzOiBJR29vZ2xlQnV0dG9uICYgUmVhY3QuQnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgeyBjYWxsYmFjayB9ID0gcHJvcHM7XG4gICAgY29uc3QgW3Jlc3BvbnNlU3RhdGUsIHNldFJlc3BvbnNlU3RhdGVdID0gdXNlU3RhdGU8SVNlcnZlclJlc3BvbnNlU3RhdGU+KFNFUlZFUl9SRVNQT05TRV9TVEFURSk7XG4gICAgY29uc3QgY3VycmVudFVybCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgY29uc3QgcXVlcnlQYXJhbXNDb2RlID0gY3VycmVudFVybC5nZXQoXCJjb2RlXCIpO1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zRXJyb3IgPSBjdXJyZW50VXJsLmdldChcImVycm9yXCIpO1xuICAgIGlmKHJlc3BvbnNlU3RhdGUuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgc3RvcmVBY2Nlc3NUb2tlbihyZXNwb25zZVN0YXRlLmFjY2Vzc1Rva2VuKTtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcImBhY2Nlc3NUb2tlbmAgc2V0IGluIGxvY2FsIHN0b3JhZ2UuXCIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAocmVzcG9uc2VTdGF0ZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvcjogQXBpIGNhbGwgZmFpbGVkIHdpdGggJHtxdWVyeVBhcmFtc0Vycm9yfSBlcnJvci5gKVxuICAgICAgICByZXR1cm4gPElubmVyQnV0dG9uIHsuLi5wcm9wc30gZXJyb3I9e3Jlc3BvbnNlU3RhdGUuZXJyb3J9IC8+O1xuICAgIH0gZWxzZSBpZiAocXVlcnlQYXJhbXNDb2RlKSB7XG4gICAgICAgIC8vIEdldCByZXN0IG9mIHBhcmFtc1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtc0VtYWlsID0gY3VycmVudFVybC5nZXQoXCJlbWFpbFwiKSB8fCBcIlwiO1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtc1Njb3BlID0gY3VycmVudFVybC5nZXQoXCJzY29wZVwiKSB8fCBcIlwiO1xuICAgICAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZVByb3BzOiBJU2VydmVyUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBlbWFpbDogcXVlcnlQYXJhbXNFbWFpbCxcbiAgICAgICAgICAgIHNjb3BlOiBxdWVyeVBhcmFtc1Njb3BlLFxuICAgICAgICAgICAgY29kZTogcXVlcnlQYXJhbXNDb2RlLFxuICAgICAgICAgICAgY2xpZW50X2lkOiBwcm9wcy5vcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgYXBpVXJsOiBwcm9wcy5hcGlVcmwsXG4gICAgICAgICAgICByZXNwb25zZVN0YXRlLFxuICAgICAgICAgICAgc2V0UmVzcG9uc2VTdGF0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgc2VydmVyUmVzcG9uc2Uoc2VydmVyUmVzcG9uc2VQcm9wcyk7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJXYWl0aW5nIGZvciByZW1vdGUgYXBpIHJlc3BvbnNlXCIpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjaygpIDogPD5Mb2FkaW5nLi4uPC8+O1xuICAgIH0gZWxzZSBpZihxdWVyeVBhcmFtc0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yOiBHb29nbGUgbG9naW4gYXR0ZW1wdCBmYWlsZWQgd2l0aCAke3F1ZXJ5UGFyYW1zRXJyb3J9IGVycm9yLmApXG4gICAgICAgIHJldHVybiA8SW5uZXJCdXR0b24gey4uLnByb3BzfSBlcnJvcj17cXVlcnlQYXJhbXNFcnJvcn0gLz47XG4gICAgfVxuICAgIC8vIERpc3BsYXkgYnV0dG9uIHdpdGggbm8gZXJyb3JzXG4gICAgcmV0dXJuIDxJbm5lckJ1dHRvbiB7Li4ucHJvcHN9IC8+O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==